{"version":3,"file":"js/882.bc7dddf3.js","mappings":"iMAEO,MAAMA,GAAeC,EAAAA,EAAAA,IAAY,OAAQ,CAC9CC,MAAOA,KACL,MAAMC,EAAYC,aAAaC,QAAQ,YACjCC,EAAWF,aAAaC,QAAQ,WAEtC,MAAO,CACLE,KAAMJ,EAAYK,KAAKC,MAAMN,GAAa,GAC1CO,SAAUJ,EAAWE,KAAKC,MAAMH,GAAY,GAC5CK,SAAU,CAAC,IAGfC,QAAS,CACPC,kBAAAA,CAAmBC,GACbA,EAAQC,IAAM,GAChBD,EAAQC,KAAO,EACfC,KAAKC,mBAAmB,WAAYD,KAAKT,OAEzCS,KAAKE,iBAAiBJ,EAE1B,EAEAK,kBAAAA,CAAmBL,GACjBA,EAAQC,KAAO,EACfC,KAAKC,mBAAmB,WAAYD,KAAKT,KAC3C,EAEAW,gBAAAA,CAAiBJ,GACf,GAAKE,KAAKI,cAAcN,GAEjB,CACL,MAAMO,EAAQL,KAAKT,KAAKe,WAAWC,GAASA,EAAKC,KAAOV,EAAQU,KAEhER,KAAKT,KAAKkB,OAAOJ,EAAO,EAC1B,MALEL,KAAKT,KAAKmB,KAAK,IAAKZ,EAASC,IAAK,IAOpCC,KAAKC,mBAAmB,WAAYD,KAAKT,KAC3C,EAEAoB,oBAAAA,CAAqBb,GACnB,GAAKE,KAAKY,aAAad,GAEhB,CACL,MAAMO,EAAQL,KAAKN,SAASY,WAAWC,GAASA,EAAKC,KAAOV,EAAQU,KAEpER,KAAKN,SAASe,OAAOJ,EAAO,EAC9B,MALEL,KAAKN,SAASgB,KAAKZ,GAOrBE,KAAKC,mBAAmB,UAAWD,KAAKN,SAC1C,EAEAO,kBAAAA,CAAmBY,EAAKC,GACtB1B,aAAa2B,QAAQF,EAAKrB,KAAKwB,UAAUF,GAC3C,EACAG,eAAAA,CAAgBnB,GACd,OAAOA,EAAQoB,UAAYpB,EAAQC,GACrC,GAGFoB,QAAS,CACPC,SAAAA,GACE,OAAOpB,KAAKT,KAAK8B,QAAO,CAACC,EAAOxB,IACvBwB,EAAQtB,KAAKiB,gBAAgBnB,IACnC,EACL,EACAM,cAAgBlB,GAAWY,GAClBZ,EAAMK,KAAKgC,MAAMhB,GAASA,EAAKC,KAAOV,EAAQU,KAGvDI,aAAe1B,GAAWY,GACjBZ,EAAMQ,SAAS6B,MAAMhB,GAASA,EAAKC,KAAOV,EAAQU,KAG3DgB,gBAAAA,GACE,OAAOxB,KAAKT,KAAKkC,MACnB,EAEAC,eAAAA,GACE,OAAO1B,KAAKN,SAAS+B,MACvB,I","sources":["webpack://yorishop/./src/stores/userStore.js"],"sourcesContent":["import { defineStore } from \"pinia\";\r\n\r\nexport const useUserStore = defineStore(\"user\", {\r\n  state: () => {\r\n    const savedCart = localStorage.getItem(\"userCart\");\r\n    const savedFav = localStorage.getItem(\"userFav\");\r\n\r\n    return {\r\n      cart: savedCart ? JSON.parse(savedCart) : [],\r\n      favorite: savedFav ? JSON.parse(savedFav) : [],\r\n      purchase: {},\r\n    };\r\n  },\r\n  actions: {\r\n    productSumDecrease(product) {\r\n      if (product.sum > 1) {\r\n        product.sum -= 1;\r\n        this.saveToLocalStorege(\"userCart\", this.cart);\r\n      } else {\r\n        this.toggleMoveToCard(product);\r\n      }\r\n    },\r\n\r\n    productSumIncrease(product) {\r\n      product.sum += 1;\r\n      this.saveToLocalStorege(\"userCart\", this.cart);\r\n    },\r\n\r\n    toggleMoveToCard(product) {\r\n      if (!this.isCartInclude(product)) {\r\n        this.cart.push({ ...product, sum: 1 });\r\n      } else {\r\n        const index = this.cart.findIndex((item) => item.id === product.id);\r\n\r\n        this.cart.splice(index, 1);\r\n      }\r\n\r\n      this.saveToLocalStorege(\"userCart\", this.cart);\r\n    },\r\n\r\n    toggleMoveToFavorite(product) {\r\n      if (!this.isFavInclude(product)) {\r\n        this.favorite.push(product);\r\n      } else {\r\n        const index = this.favorite.findIndex((item) => item.id === product.id);\r\n\r\n        this.favorite.splice(index, 1);\r\n      }\r\n\r\n      this.saveToLocalStorege(\"userFav\", this.favorite);\r\n    },\r\n\r\n    saveToLocalStorege(key, data) {\r\n      localStorage.setItem(key, JSON.stringify(data));\r\n    },\r\n    getCurrentPrice(product) {\r\n      return product.new_price * product.sum;\r\n    },\r\n  },\r\n\r\n  getters: {\r\n    orderCost() {\r\n      return this.cart.reduce((total, product) => {\r\n        return total + this.getCurrentPrice(product);\r\n      }, 0);\r\n    },\r\n    isCartInclude: (state) => (product) => {\r\n      return state.cart.some((item) => item.id === product.id);\r\n    },\r\n\r\n    isFavInclude: (state) => (product) => {\r\n      return state.favorite.some((item) => item.id === product.id);\r\n    },\r\n\r\n    totalCartCounter() {\r\n      return this.cart.length;\r\n    },\r\n\r\n    totalFavCounter() {\r\n      return this.favorite.length;\r\n    },\r\n  },\r\n});\r\n"],"names":["useUserStore","defineStore","state","savedCart","localStorage","getItem","savedFav","cart","JSON","parse","favorite","purchase","actions","productSumDecrease","product","sum","this","saveToLocalStorege","toggleMoveToCard","productSumIncrease","isCartInclude","index","findIndex","item","id","splice","push","toggleMoveToFavorite","isFavInclude","key","data","setItem","stringify","getCurrentPrice","new_price","getters","orderCost","reduce","total","some","totalCartCounter","length","totalFavCounter"],"sourceRoot":""}